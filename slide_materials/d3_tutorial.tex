%  d3 Tutorial CISNET Programmers Breakout November 2, 2011
%  Author: Ben Racine
%  Date:   November 2, 2011

\documentclass{beamer}

\mode<presentation>
{
    \usetheme{Warsaw}
    \setbeamercovered{transparent}
}

\setbeamercolor{math text}{fg=red!50!black}

\usepackage{amsmath,amssymb}
\usepackage{colortbl}
\usepackage[english]{babel}
\usepackage{fancybox, stmaryrd}
\usepackage[latin1]{inputenc}
\usepackage{lmodern}
\usepackage{pgf, pgfnodes}
\usepackage[T1]{fontenc} 
\usepackage{times}
\usepackage{verbatim}

\definecolor{links}{HTML}{2A1B81}
\hypersetup{colorlinks,linkcolor=,urlcolor=links}


\title{PBO Workshop} 
\subtitle{Data-Driven Documents With d3} 
\author{Ben Racine \inst{1} }
\institute{\inst{1} Cornerstone Systems NW }
\date{November 2, 2011}
\subject{Data Visualization}


\begin{document}


\begin{frame}
    \frametitle{}
    \titlepage
\end{frame}


\begin{frame}
    \scriptsize{
        \frametitle{Outline}
        \tableofcontents[pausesections]
    }
\end{frame}


\section{Introduction}

\subsection{Attendee Introduction}

\begin{frame}
    \frametitle{Introductions}
    \pause
    \begin{block}{Favorite Tools?} 
    \begin{itemize}
        \item Database and/or spreadsheet tools
        \item DSL and/or general programming languages
        \item Visualization tools
        \end{itemize}
    \end{block}
    \pause
    \begin{block}{Any web developers?}
        \begin{itemize}
        \item Javascript experience?
        \end{itemize}
    \end{block}
\end{frame}


\subsection{Browser Poll}

\begin{frame}
    \frametitle{Introductions}
    \begin{block}{Browser Poll}
        \begin{itemize}
        \pause
        \item Chrome
        \pause
        \item Firefox 3+
        \pause
        \item IE9
        \pause
        \item Safari
        \pause
        \item None of the above?
        \end{itemize}
    \end{block}
\end{frame}


\section{Background}

\begin{frame}
    \frametitle{Background}
    \begin{block}{jQuery $+$ Protovis $\approx$ d3}
        \begin{itemize}
        \pause
        \item Any jQuery experience?
        \pause
            \begin{itemize}
            \item D3 is similar, but can also target the SVG (xml-like image format)
        \pause
            \item They both do some fancy functional programming to make it possible 
                  for us to declaratively (and efficiently) reach into the dom tree.
            \end{itemize}
        \pause
        \item Any Protovis exposure by any chance?
       \end{itemize}
    \end{block}
\end{frame}


\section{Resources}

\begin{frame}
    \frametitle{Resources}
        \pause
        \begin{itemize}
        \item \href{http://mbostock.github.com/d3/}{\underline{Github}: http://mbostock.github.com/d3/}
            \begin{itemize}
            \item \href{https://github.com/mbostock/d3/wiki/API-Reference}{\underline{API}: https://github.com/mbostock/d3/wiki/API-Reference}
            \item \href{http://mbostock.github.com/d3/ex/}{\underline{Examples}: http://mbostock.github.com/d3/ex/}
            \item \href{https://github.com/mbostock/d3.git}{\underline{Source}: https://github.com/mbostock/d3.git}
            \end{itemize}
        \pause
        \item \href{http://groups.google.com/group/d3-js?pli=1}{Google group}
        \pause
        \item \href{http://www.w3.org/TR/SVG/}{SVG Specification (v1.1)}
        \pause
        \item Twitter: $@i3enhamin, @mbostock$
        \end{itemize}
\end{frame}



\section{Installation}

\begin{frame}[fragile]
    \frametitle{Installation}
    \begin{block}{Decision Tree}
        \tiny{
        \begin{verbatim}
if you are comfortable developing in the browser
   if you are a git user
       git clone git@github.com:benracine/d3_cisnet_tutorial.git
   else
       https://github.com/benracine/d3_cisnet_tutorial/downloads
   end
else
    jsfiddle links
end
        \end{verbatim}
        }
    \end{block}
%   \footnote{Recommended to serve up on localhost on Chrome, i.e. python -m SimpleHTTPServer 8000}
    \footnote{jsfiddle examples still need to be done}
\end{frame}


\section{Tutorials}


\begin{frame}
    \frametitle{Ready to Get Started?}
    \begin{block}{Canonical Test}
        \begin{itemize}
        \pause
        \item Navigate to an exercise file
        \pause
        \item Open up your browser's web developer tools
        \pause
        \item Go to console
        \pause
        \item Enter d3 and you should see 'object' in the response
        \end{itemize}
    \end{block}
\end{frame}


\subsection{Hello World}

\html tags, elements, attributes and properties 
- get straight on 

change the text size and be sure to use style, because
style targets properties

change the text-color using style as well

change the id attribute 


make people grok array/callbacks by manipulating a couple spans...
    - add two spans
    - comment out your original code
    - select all spans d3.select("span")
    - go to scripts
    - 
    - use selectAll to choose all elements
    - this allows us to select span
    - 


\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-01.html}
        \begin{itemize}
            \pause
            \item  Hello world only using HTML (i.e. no SVG)
            \pause
            \item  Concepts
            \begin{itemize}
                \pause
    			\item Sourcing d3 file 
                \pause
                \item Unified d3 namespace... all 
                \pause
                \item Selectors
                \pause
                \begin{itemize}
                        - use CSS3 selector style notation
                     you can select by tag ("div"), class (".awesome"), unique identifier ("#foo"), attribute ("[color=red]"), or containment ("parent child").

                     Selectors can also be intersected (".this.that" for logical AND) or unioned (".this, .that" for logical OR).

                     Make us not need to use for loops and instead program in a declarative way across all elements.

                     Though note: each() can provide support for accessing each element manually

                     Can also accept a node, i.e. document.body
                \end{itemize}
                \pause
                \item select (just chooses the first element) vs. selectAll
                \item d3.select("") $\approx$ \$("") $\approx$ jQuery("")
                \pause

Do a better job here, but... 


                \item Operators can get or set attr, class, style, property, html and text
                \item attr - 
                By default, D3 supports svg, xhtml, xlink, xml and xmlns namespaces. Additional namespaces can be registered by adding to d3.ns.prefix.
                \item class
                toggling of css classes
                \item style
                sets the css style property, can be run w/ priority levels
                \item property
                \item can be set as either constants or as functions

                \item Cascading/callbacks
                When used to set document content, the operators return the current selection, so you can chain multiple operators together in a concise statement.
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}

do we want to address exercise-02.html?



\subsection{Circle and Text}

- change the color of the drop-shadow
- 

\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-03.html}
        \begin{itemize}
            \pause
            \item A circle with text
            \pause
            \item Concepts
            \begin{itemize}
                \pause
                \item Have to touch on CSS styling a little bit
                note that the css selector notation in the style section is 
                the same as that used in the d3.select("") command
                \pause
                \item SVG elements, reference the SVG spec for relevant attributes
                \item think of an SVG element as the canvas that we're going to draw on

                \item width and height could be related to the width and height of the 
                \item window in order to be self-adjusting
                \pause
                \item Appending is fairly self-explanatory
                \pause
                \item Transforms, coordinate transform to make it easier to think of
                \item Note that the origin is in the top-left corner and that positive y
                      is down.
                \item Jumping ahead, I will commonly account for this, not with a transform, but
                        with an appropriate scale, which we will get to shortly
                \item Note: a side effect of this transform is that by not setting the x,y variables
                        on the circle... it defaults to zero.  This zero is now the point that is
                        transformed to the middle of the page though.
                \pause
                \item Namespaces, explain that svg:svg <-- first one is a namespace, second
                one is the element itself
                svg:g is kind of like a div in html... just a bag in which to group other things
                in
                note: you give them uniqueness through class or id
                \pause
                \item Attr, addressed in previous slide
                \pause
                \item Appropriate use of namespace variables
                \item Assign a namespace at any "juncture" in your workflow
                    i.e. if you're about to add circles AND text to your scenegraph... it's
                        probably appropriate to add a name to the state of your scenegraph at
                        that point
                \pause
                \item 
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}

exercise-04.html
event listeners

exercise-05.html
- skip tweens and get to data bindings

exercise-06.html
- notice that we're scaling the whole image, 

exercise-07.html
- listen to user events, i.e watch the mouse move

exercise-08.html
- mouse fading events

exercise-09.html
- how to draw a bar graph
- the basics of appending 

\subsection{Bar Chart}

\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-10.html}
        \begin{itemize}
            \pause
            \item Bar Chart with HTML Elements
            \pause
            \item have to explain scales... 

            \item Concepts
            \begin{itemize}
                \pause
                \item Identity function
                \pause
                \item Functional programming
                \pause
                \item Data binding selections
                \begin{itemize}
                    \pause
                    \item Update
                    \pause
                    \item Enter
                    \pause
                    \item Exit
                \end{itemize}
                \pause
                \item g namespace
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}


\subsection{2d Array into HTML Table}

- some subtle behavior
- if I could ask Lauren to help me put this clearly that would probably help

\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-11.html}
        \pause
        \begin{itemize}
        \pause
        \item 2d Array into HTML Table
        \pause
        \item Concepts
            \begin{itemize}
                \item Styles
                \item Scales
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}


\subsection{2d Array into SVG Bar Chart}

he's used rangebands and ordinal scales


\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-12.html}
        \pause
        \begin{itemize}
        \pause
        \item 2d Array into SVG Bar Chart
        \pause
        \item Concepts
            \begin{itemize}
                \item RangeBands
                \item Linear vs. ordinal scales
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}


exercise-13.html
\subsection{Axes Elements}
axes elements are the stars
do a quick little demo of changing the results to show off how flexible it is
\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{exercise-13.html}
        \begin{itemize}
            \pause
            \item Axes Elements
        \end{itemize} 
    \end{block}
\end{frame}


\subsection
address exercise-04.html
event listeners can take many forms
    - i.e. you can listen for different types of events
    - click, mouseover, submit, etc.
    - there's a subtlety of attaching to multiple functions to the same event... 
      i.e. click.foo -> one function, click.bar -> another function
    - d, i, this...  


I didn't bring over d3.time.js nor d3.csv.js --> because I didn't search very thoroughly

\begin{frame}
    \frametitle{Tutorials}
    \begin{block}{Extras}
        \begin{itemize}
            \item css-hover
            \item d3 event-based transition
            \item Transition : just a non-instantaneous transformation
            \begin{itemize}
                \item Duration
                \item Delay
            \end{itemize}
            \item Ease
            \item Interpolate
            \item Tween
            \item call and each for control flow 
        \end{itemize}
    \end{block}
\end{frame}


\section{Conclusion}

\begin{frame}
    \frametitle{Conclusion}
    \begin{itemize}
        \item Blah
    \end{itemize}
\end{frame}

\end{document}
