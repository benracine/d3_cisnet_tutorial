% d3 Tutorial CISNET Programmers Breakout November 2, 2011
% Author: Ben Racine
% Date:   November 2, 2011
% 

\documentclass{beamer}
\mode<presentation>
{
    \usetheme{Warsaw}
    \setbeamercovered{transparent}
}

\setbeamercolor{math text}{fg=red!50!black}

\usepackage{amsmath,amssymb}
\usepackage{colortbl}
\usepackage[english]{babel}
\usepackage{fancybox, stmaryrd}
\usepackage[latin1]{inputenc}
\usepackage{lmodern}
\usepackage{pgf, pgfnodes}
\usepackage[T1]{fontenc} 
\usepackage{times}
\usepackage{verbatim}

\definecolor{links}{HTML}{2A1B81}
\hypersetup{colorlinks,linkcolor=,urlcolor=links}


\title{PBO Workshop} 
\subtitle{Creating Data-Driven Documents With D3} 
\author{Ben Racine \inst{1} }
\institute{\inst{1} Cornerstone Systems NW }
\date{November 2, 2011}
\subject{Data Visualization}


\begin{document}



\begin{frame}
    \frametitle{}
    \titlepage
\end{frame}



% \begin{frame}
%     \scriptsize{
%         \frametitle{Outline}
%         \tableofcontents[pausesections]
%     }
% \end{frame}



\section{Introduction}


\subsection{If you are eager to get these materials}


% \begin{frame}
%     \frametitle{Again, ff you are eager to obtain everything}
%     \begin{itemize}
% \pause
%     \item Navigate to github.com
% \pause
%     \item Search for benracine
% \pause
%     \item This repo should be the first hit, i.e. "d3\_cisnet\_tutorial"
%     \end{itemize}
% \end{frame}


\subsection{Attendee Introduction}


\begin{frame}
    \frametitle{Attendee Introduction}
    \begin{itemize}
\pause
    \item Name
    \item Group
    \item 2 main visualization tools you have experience with or like
    \item Any web development experience?
    \item Any Javascript experience?
    \end{itemize}
\end{frame}


\subsection{Browser Poll}

\begin{frame}
    \frametitle{Introductions}
\pause
    \begin{block}{Browser Poll}
        \begin{itemize}
\pause
        \item Chrome
\pause
        \item Firefox 3+
\pause
        \item Safari
\pause
        \item Opera
\pause        
        \item IE9
\pause
        \item None of the above?
        \end{itemize}
    \end{block}
\end{frame}


\subsection{Javascript in 120 seconds (yeah right)}


\begin{frame}
    \frametitle{Javascript in 120 seconds (yeah right)}
    \begin{itemize}
    \item C control structures
    \item Dynamic and weak/duck typing
    \item Primitive types include:
        \begin{itemize}
        \item Boolean: 
            \begin{itemize}
            \item var mayday = false;
            \end{itemize}
        \item Number: 
            \begin{itemize}
            \item var sal = 20; 
            \item var pal = 12.1;
            \end{itemize}
        \item String: 
            \begin{itemize}
            \item var myName = "Some Name";
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Javascript in 120 seconds (yeah right)}
    \begin{itemize}
    \item Collections
        \begin{itemize}
        \item Array: var myArray = [[0], [2, 4]]; 
        \item console.log(myArray[1][1]); > 4
        \item Object: var myObject = {}; myObject.foo = "bar";
        \end{itemize}
    \item Functions
        \begin{itemize}
        \item Are objects; have properties and methods
        \item Can be assigned to variables
        \item Can be passed as arguments
        \item Can be returned by other functions
        \item May be nested
        \item Closures -> see Python example on wikipedia closure article for a concise example
        \end{itemize}
    \end{itemize}
\end{frame}

% \begin{frame}
%     \frametitle{Attendee Introduction}
% \pause
%     \begin{block}{Favorite Tools?} 
% \pause
%     \begin{itemize}
% %    \item Database and/or spreadsheet tools
% \pause
% %    \item DSL and/or general programming languages
% \pause
%     \item Visualization tools
%     \end{itemize}
%     \end{block}
% \pause
%     \begin{block}{Any web developers?}
%         \begin{itemize}
% \pause
%         \item Any Javascript experience?
%         \end{itemize}
%     \end{block}
% \end{frame}




\section{Background}

\subsection{Really Helpful But Improbable Analogues}

\begin{frame}
    \frametitle{Background}
    \begin{block}{jQuery $+$ Protovis $\approx$ d3}
\pause
        \begin{itemize}
        \item Any jQuery experience by any chance?
\pause
            \begin{itemize}
            \item d3 is similar, but can also target the SVG (an xml image format)
\pause
            \item They both do some fancy functional programming to make it possible 
                  for us to declaratively reach into the dom tree
            \end{itemize}
\pause
       \item Any Protovis exposure by any chance?
       \end{itemize}
    \end{block}
\end{frame}



\subsection{Resources}

\begin{frame}
    \frametitle{Resources}
\pause
        \begin{itemize}
        \item \href{http://mbostock.github.com/d3/}{\underline{Github}: http://mbostock.github.com/d3/}
\pause
            \begin{itemize}
            \item \href{https://github.com/mbostock/d3/wiki/API-Reference}{\underline{API Documentation}: https://github.com/mbostock/d3/wiki/API-Reference}
\pause
            \item \href{http://mbostock.github.com/d3/ex/}{\underline{Examples}: http://mbostock.github.com/d3/ex/}
\pause
            \item \href{https://github.com/mbostock/d3.git}{\underline{Source}: https://github.com/mbostock/d3.git}
            \end{itemize}
\pause
        \item \href{http://groups.google.com/group/d3-js?pli=1}{Google message group}
\pause
        \item \href{http://www.w3.org/TR/SVG/}{SVG Specification (v1.1)}
\pause
        \item Me $@i3enhamin$
        \item The Author $@mbostock$
        \end{itemize}
\end{frame}



\section{Installation}

\subsection{Participation Query}

\begin{frame}[fragile]
    \frametitle{Participation Query}
    \begin{itemize}
    \item Can I get a sense of the fraction that intend on stepping through the exercises?
\pause
    \item Versus the number that would just like to follow along?
    \end{itemize}
\end{frame}


\subsection{Clone or Download Slides, Source Code and Tutorials}

\begin{frame}[fragile]
    \frametitle{Clone or Download Slides, Source Code and Tutorials}
        \tiny{
        \begin{verbatim}
    if you have an internet connection
        if you are a git user
            git clone git@github.com:benracine/d3_cisnet_tutorial.git
        else
            https://github.com/benracine/d3_cisnet_tutorial/downloads
        end
    else
        we have usb sticks (that also have Chrome on them)
    end
        \end{verbatim}
        }
\end{frame}



\subsection{Canonical Test to Ensure Installation}

\begin{frame}
    \frametitle{Fire up your Developer Tools}
    \begin{itemize}
\pause
    \item In your browser, navigate to exercise-01.html in the tutorials folder of the repo I provided
\pause
    \item Open up your browser's web developer tools
        \begin{itemize}
        \item Chrome, Safari, Opera and IE9 have built in tools
        \item Firebug for Firefox
        \end{itemize}
\pause
    \item ctrl shift i in Chrome
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Canonical Test to Ensure Installation}
    \begin{itemize}
\pause
    \item Take a peek at:
        \begin{itemize}
        \item Elements: shows you the current document structure
\pause
        \item Resources: shows you all documents involved in this rendering
\pause
        \item Scripts: allows for breakpoints like a classic IDE
\pause
        \item Console: a REPL to test code
\pause
        \end{itemize}
    \item Enter d3 and you should see $\> Object $ in the response
    \end{itemize}
\end{frame}




\section{Tutorials: Round One}


\subsection{Briefly playing in the console}


\begin{frame}
    \frametitle{Briefly playing in the console}
    \begin{itemize}
    \item Even if you don't plan on following along, you can do this starter
    \item Navigate to \href{http://mbostock.github.com/d3/}{http://mbostock.github.com/d3/}
    \item Let's change the color of the hyperlinks
        \begin{itemize}
        \item Open console
        \item d3.selectAll("a").style("color","red")
        \item d3.selectAll("p").style("color","blue")
        \item d3.selectAll("p").style("color", function(d,i) {return "hsl(" $+$ Math.random() $*$ 360 $+$ ",100\%,50\%)"; });
        \end{itemize}
    \item Note the existence of both d3.select and d3.selectAll
        \begin{itemize}
        \item d3.select only chooses the first element
        \end{itemize}
    \end{itemize}
\end{frame}


\subsection{Hello world}


\begin{frame}
    \frametitle{Exercise-01.html: Hello World}
    \begin{itemize}
    \item This example only uses raw html (i.e. no SVG)
    \item Note: we're putting html, css and js all in one file for brevity
    \item Include the main d3 file in line 5
        \begin{itemize}
        \item This, d3.js, is the 'core' module
        \item The default build of d3.js includes:
            \begin{itemize}
            \item the core
            \item scale
            \item svg 
            \item behavior modules
            \end{itemize}
        \item Others include:
            \begin{itemize}
            \item d3.time.js
            \item d3.csv.js
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Exercise-01.html: Hello World: Selectors}
    \begin{itemize}
    \item All d3 commands live in a unified d3 namespace
    \item A \underline{selector}, (i.e. d3.select("body")), is a key d3 term
        \begin{itemize}
        \item d3 supports CSS3 selector notation for reaching into the DOM tree
            \begin{itemize}
            \item Tag ($"div"$)
            \item Class ($".awesome"$)
            \item Identifier ($"\#foo"$)
pause
            \item Containment ($"parent child"$)
            \item Intersection ($".this.that"$ for logical AND) 
            \item Union ($".this, .that"$ for logical OR)
            \item Attribute ($"[color=red]"$)
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-01.html: Hello World: Operators}
    \begin{itemize}
    \item Although elements can be selected individually we're normally using operators on the whole set
        \begin{itemize}
        \item .text() is an "\underline{operator}", another key d3 term
        \item Operators can both get or set:
            \begin{itemize}
            \item attribute: .attr()
            \item html content: .html()
            \item CSS classes: .classed() 
            \item a CSS property: .property() (Some HTML elements have special properties that are not addressable using standard attributes or styles)
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-01.html: Hello World: Method Chaining}
    \begin{itemize}
    \item Notice that \underline{method chaining} has already begun
    \item Method chaining takes advantage of functions that are written to return the modifed version of the incoming selection
    \item Elements can be accessed directly
        \begin{itemize}
        \item (e.g., selection$[0][0]$)
        \item or through the .each() call
        \end{itemize}
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-01.html: Hello World}
    \begin{itemize}
    \item By default, D3 supports svg, xhtml, xlink, xml and xmlns namespaces
    \item Additional namespaces can be registered
    \item Operators can be set as either constants or as functions
    \end{itemize}
Bear with me, more examples should solidify this stuff...
\end{frame}



\subsection{Including an SVG element}


\begin{frame}
    \frametitle{Exercise-02.html: Including an SVG Element}
    \begin{itemize}
    \item Width and height could be related to the width and height of the window
    \item Think of the svg element as a canvas with a transformed coordinate system
    \item A svg:g element is means of containing other svg elements
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-02.html: Including an SVG Element: Coordinates}
    \begin{itemize}
    \item A tranform can be a handy way of moving the coordinate system to a desired location
    \item Note:
        \begin{itemize}
        \item Origin is the top-left
        \item x is positive to the right
        \item y is positive down
        \item scales can be used to correct to cartesian coords (more on that to come)
        \end{itemize}
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-02.html: Including an SVG Element: Additional Notes}
    \begin{itemize}
    \item svg:circle self explanatory
        \begin{itemize}
        \item Refer to the SVG spec for relevant and/or required circle attributes
        \end{itemize}
    \item Note the use of a JavaScript namespace variable to cache a selection of interest
    \item An important design decision
    \item You want to do this at any crossroads in your workflow
    \end{itemize}
\end{frame}



\subsection{Combining with CSS Selections}

\begin{frame}
    \frametitle{Exercise-03.html: Combining with CSS Selections}
    \begin{itemize}
    \item Concepts
        \begin{itemize}
        \item CSS3 selector notation in the style section $\approx$ in the d3.select("") command
        \item Appending is fairly self-explanatory
        \item Good practice to use intelligent id and class attributes
        \end{itemize}
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Exercise-03.html: Combining with CSS Selections}
    \begin{itemize}
    \item Namespaces, explain that svg:svg <-- first one is a namespace, second one is the element itself svg:g is kind of like a div in html:... just a bag in which to group other things in note: you give them uniqueness through class or id
    \item Attr, addressed in previous slide
    \item Appropriate use of namespace variables
    \item Assign a namespace at any "juncture" in your workflow i.e. if you're about to add circles AND text to your scenegraph... it's probably appropriate to add a name to the state of your scenegraph at that point
    \end{itemize}
\end{frame}


\section{A Quick Break}

\begin{frame}
    \frametitle{A Quick Break}
\end{frame}



\section{Tutorials: Round Two}



\subsection{Bar Chart}


\begin{frame}
    \frametitle{Exercise-10.html: Bar Chart}
    \begin{itemize}
    \item Bar Chart with HTML Elements
    \item Scales
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-10.html: Bar Chart}
    \begin{itemize}
    \item Identity function
    \item Functional programming
    \item Data binding selections
    \item Update
    \item Enter
    \item Exit
    \end{itemize}
\end{frame}



\begin{frame}
    \frametitle{Exercise-17.html: Dynamic Bar Chart}
Probably the last exercise
\end{frame}



\subsection{2d Array into HTML Table}

\begin{frame}
    \frametitle{Exercise-11.html: 2d Array into an HTML Table}
    \begin{itemize}
    \item Foo
    \end{itemize}
\end{frame}



\subsection{2d Array into an SVG Bar Chart}

\begin{frame}
    \frametitle{Exercise-12.html: 2d Array into SVG Bar Chart}
    \begin{itemize}
    \item 2d Array into SVG Bar Chart
    \item RangeBands
    \item Linear vs. ordinal scales
    \end{itemize}
\end{frame}



\subsection{Axes Elements}

\begin{frame}
    \frametitle{Exercise-13.html: Axes Elements}
    \begin{itemize}
    \item Foo
    \end{itemize} 
\end{frame}



\subsection{Extras}

\subsection{Event Listeners}
\begin{frame}
    \frametitle{Exercises-05.html through Exercise-08.html: Skipping for now}
    \begin{itemize}
    \item d, i, and this
    \item Event listeners can take many forms
    \item Can listen for different types of events
    \item Click, mouseover, submit, etc.
    \item There's a subtlety of attaching to multiple functions to the same event.
    \item i.e. click.foo maps to one function, click.bar maps to another function
    \end{itemize}
\end{frame}


\subsection{Tweens, Scaling, User-events}

\begin{frame}
    \frametitle{Exercises-05.html through Exercise-08.html: Skipping for now}
    \begin{itemize}
    \item exercise-05.html: skip tweens and get to data bindings
    \item exercise-06.html: notice that we're scaling the whole image,
    \item exercise-07.html: listen to user events, i.e watch the mouse move
    \item exercise-08.html: mouse fading events
    \item exercise-09.html: html-based bar-chart to emphasize that it's not just for SVG canvases
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Extras}
    \begin{itemize}
    \item Transition $\approx$ a non-instantaneous transformation with extra attributes:
        \begin{itemize}
        \item Duration - 
        \item Delay -  
        \end{itemize}
    \item Ease
    \item Interpolate
    \item Tween (exercise-05.html if we get a chance)
    \item Call and each for control flow 
    \end{itemize}
\end{frame}



\section{Conclusion}


\begin{frame}
    \frametitle{Conclusion}
    \begin{itemize}
    \item You rock for sticking through this duration
    \end{itemize}
\end{frame}


\end{document}
